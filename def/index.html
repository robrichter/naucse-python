<h1 id="vlastni_funkce">Vlastní funkce
<a href="#vlastni_funkce" class="header-link">#</a>
</h1>
<p>Pamatuješ na funkce <code>len()</code>, <code>print()</code> nebo <code>randrange()</code> z modulu <code>random</code>?
Jsou jako kouzelná zaříkadla z knihy vázané v kůži: když víš jak se jmenují
a umíš je správně napsat, něco pro tebe udělají.</p>
<p>Teď postoupíme na další úroveň: vymyslíme si vlastní zaříkadla!
Jak? Budeme kombinovat příkazy, které už známe.</p>
<p>Třeba funkce, která tě pozdraví, by mohla:</p>
<ul>
<li>Vypsat „ahoj!“</li>
<li>Vypsat „jak se máš?“</li>
</ul>
<p>Definice funkce v Pythonu začíná klíčovým slovem <code>def</code>,
dále je uveden název a následují závorky (zatím prázdné).
Pak je jako po <code>if</code> dvojtečka a odsazené příkazy – tentokrát
příkazy, které má funkce provést.
Napiš to do programu:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ahoj!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Jak se máš?&#39;</span><span class="p">)</span>
</pre></div><p>Tvoje první funkce je připravena!</p>
<p>Když ale tenhle program spustíš, nic neudělá.
To proto, že tohle je jen <em>definice</em> funkce.
Python teď ví jak pozdravit – ale neřeklo se, že to má udělat!</p>
<p>Na konec programu přidej volání.
To už <em>není součást funkce</em>, ale pokračování samotného programu.
Proto nesmí být odsazené:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ahoj!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Jak se máš?&#39;</span><span class="p">)</span>

<span class="n">pozdrav</span><span class="p">()</span>
</pre></div><p>Co se stane, když funkci zavoláš několikrát po sobě?</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ahoj!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Jak se máš?&#39;</span><span class="p">)</span>

<span class="n">pozdrav</span><span class="p">()</span>
<span class="n">pozdrav</span><span class="p">()</span>
<span class="n">pozdrav</span><span class="p">()</span>
</pre></div><div class="solution" id="solution-0">
    <h3>Řešení</h3>
    <div class="solution-cover">
        <a href="naucse:solution?solution=0"><span class="link-text">Ukázat řešení</span></a>
    </div>
    <div class="solution-body" aria-hidden="true">
        <p>Každé volání spustí tělo funkce znovu.</p>
<div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(venv)</span> <span class="gp">$ </span>python<span class="w"> </span>python_intro.py
<span class="go">Ahoj!</span>
<span class="go">Jak se máš?</span>
<span class="go">Ahoj!</span>
<span class="go">Jak se máš?</span>
<span class="go">Ahoj!</span>
<span class="go">Jak se máš?</span>
</pre></div>
    </div>
</div><p>Co se stane, když volání dáš <em>nad</em> definici funkce, místo na konec programu?</p>
<div class="highlight"><pre><span></span><span class="n">pozdrav</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">pozdrav</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ahoj!&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Jak se máš?&#39;</span><span class="p">)</span>
</pre></div><div class="solution" id="solution-1">
    <h3>Řešení</h3>
    <div class="solution-cover">
        <a href="naucse:solution?solution=1"><span class="link-text">Ukázat řešení</span></a>
    </div>
    <div class="solution-body" aria-hidden="true">
        <div class="highlight"><pre><span></span><span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">NameError</span>: <span class="n">name &#39;pozdrav&#39; is not defined</span>
</pre></div><p>Python si postěžuje na <code>NameError</code> – nezná nic jménem <code>pozdrav</code>.</p>
<p>Python totiž program čte odzhora dolů.
Až příkazem <code>def</code> se „naučí" jak zdravit.
Předtím, než se k příkazu <code>def</code> dostane, funkce neexistuje.</p>
    </div>
</div><h2 id="parametry">Parametry
<a href="#parametry" class="header-link">#</a>
</h2>
<p>Tvoje funkce se dá volat jen jako <code>pozdrav()</code>.
Funkce ale jako <code>len('slovo')</code> a <code>print(1 + 2)</code> umí navíc pracovat s hodnotou.</p>
<p>Poďme teraz napisať funkciu, ktorá ťa pozdraví menom.
(Uľahčíme si to použitím jazyka, ktorý nepoužíva piaty pád.)</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">(</span><span class="n">meno</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vítam ťa,&#39;</span><span class="p">,</span> <span class="n">meno</span><span class="p">)</span>

<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Ola&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Soňa&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Hubert&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Anička&#39;</span><span class="p">)</span>
</pre></div><p>Jak to funguje?
V definici funkce uvedeš závorkách <em>parametr</em> – jméno proměnné se kterou bude
funkce pracovat.
Hodnotu pro tenhle parametr pak zadáš při volání funkce.</p>
<p>Zvládneš napsat program, který se zeptá na jméno a pak tě pozdraví?</p>
<div class="solution" id="solution-2">
    <h3>Řešení</h3>
    <div class="solution-cover">
        <a href="naucse:solution?solution=2"><span class="link-text">Ukázat řešení</span></a>
    </div>
    <div class="solution-body" aria-hidden="true">
        <div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">(</span><span class="n">meno</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vitam ťa,&#39;</span><span class="p">,</span> <span class="n">meno</span><span class="p">)</span>

<span class="n">pozdrav</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Ako sa voláš? &#39;</span><span class="p">))</span>
</pre></div>
    </div>
</div><p>Co se stane, když funkci zavoláš bez hodnoty pro parametr?</p>
<div class="solution" id="solution-3">
    <h3>Řešení</h3>
    <div class="solution-cover">
        <a href="naucse:solution?solution=3"><span class="link-text">Ukázat řešení</span></a>
    </div>
    <div class="solution-body" aria-hidden="true">
        <div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">(</span><span class="n">meno</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vitam ťa,&#39;</span><span class="p">,</span> <span class="n">meno</span><span class="p">)</span>

<span class="n">pozdrav</span><span class="p">()</span>
</pre></div><div class="highlight"><pre><span></span><span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">9</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">pozdrav() missing 1 required positional argument: &#39;meno&#39;</span>
</pre></div><p>Python si stěžuje na <code>TypeError</code> – funkce <code>pozdrav</code> nedostala povinný
argument <code>meno</code>.</p>
    </div>
</div><p>Funkce může obsahovat jakýkoli kód.
Třeba podmíněný příkaz, <code>if</code>.
Příkazy po <code>if</code> je pak potřeba odsatit o <em>další</em> čtyři mezery:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pozdrav</span><span class="p">(</span><span class="n">meno</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vitam ťa,&#39;</span><span class="p">,</span> <span class="n">meno</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">meno</span> <span class="o">==</span> <span class="s1">&#39;Ola&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ty umíš programovať!&#39;</span><span class="p">)</span>

<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Hubert&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Ola&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Soňa&#39;</span><span class="p">)</span>
</pre></div><h2 id="vraceni">Vracení
<a href="#vraceni" class="header-link">#</a>
</h2>
<p>Další věc, kterou funkce jako <code>len</code> umí, je <em>vrátit</em> výsledek:</p>
<div class="highlight"><pre><span></span><span class="n">delka</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;Ola&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">delka</span><span class="p">)</span>        <span class="c1"># napíše: 3</span>
</pre></div><p>Jak na to, kdybys takovou funkci chtěla napsat?
V definici funkce můžeš použít příkaz <code>return</code>.
Ten funkci okamžitě ukončí a vrátí danou hodnotu:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dvojnasobek</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dvojnasobek</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span>
</pre></div><p>Zkus se zamyslet, jak napsat funkci, která vrátí pátý pád nějakého jména. Třeba:</p>
<ul>
<li><code>paty_pad('Ola')</code> → 'Olo'</li>
<li><code>paty_pad('Soňa')</code> → 'Soňo'</li>
<li><code>paty_pad('Hubert')</code> → 'Huberte'</li>
</ul>
<p>Tohle je velice složitý úkol, tak si ho trochu zjednodušíme.
Funkce by měla dělat tohle:</p>
<ul>
<li>Pokud jméno je „Hubert“:<ul>
<li>vrátí <code>Huberte</code></li>
</ul>
</li>
<li>Pokud jméno končí na <code>a</code>:<ul>
<li>vrátí jméno s <code>o</code> místo posledního písmenka</li>
</ul>
</li>
<li>Jinak:<ul>
<li>Vrátí původní jméno. (Uživatel si toho snad nevšimne.)</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">paty_pad</span><span class="p">(</span><span class="n">jmeno</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">jmeno</span> <span class="o">==</span> <span class="s1">&#39;Hubert&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Huberte&#39;</span>
    <span class="k">elif</span> <span class="n">jmeno</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jmeno</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;o&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jmeno</span>
</pre></div><p>Dokážeš změnit funkci <code>pozdrav</code>, aby zdravila v češtině?
Můžeš na to použít funkci <code>paty_pad</code>.</p>
<div class="solution" id="solution-4">
    <h3>Řešení</h3>
    <div class="solution-cover">
        <a href="naucse:solution?solution=4"><span class="link-text">Ukázat řešení</span></a>
    </div>
    <div class="solution-body" aria-hidden="true">
        <div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">paty_pad</span><span class="p">(</span><span class="n">jmeno</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">jmeno</span> <span class="o">==</span> <span class="s1">&#39;Hubert&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Huberte&#39;</span>
    <span class="k">elif</span> <span class="n">jmeno</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jmeno</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;o&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jmeno</span>

<span class="k">def</span> <span class="nf">pozdrav</span><span class="p">(</span><span class="n">jmeno</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vítam tě,&#39;</span><span class="p">,</span> <span class="n">paty_pad</span><span class="p">(</span><span class="n">jmeno</span><span class="p">))</span>

<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Hubert&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Ola&#39;</span><span class="p">)</span>
<span class="n">pozdrav</span><span class="p">(</span><span class="s1">&#39;Soňa&#39;</span><span class="p">)</span>
</pre></div>
    </div>
</div><h2 id="shrnuti">Shrnutí
<a href="#shrnuti" class="header-link">#</a>
</h2>
<p>Co bylo nového tentokrát?</p>
<ul>
<li><strong>Funkce</strong> umožňuje pojmenovat nějkolik příkazů, a pak je zavolat najednou.</li>
<li><strong>Parametry</strong> funkce, hodnoty se kterými funkce pracuje,
se zadávají v závorkách.</li>
<li><code>return</code> ukončí funkci a vrátí hodnotu</li>
</ul>